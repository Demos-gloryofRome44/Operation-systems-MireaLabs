# –ê—Ä—Ö–∏–≤–∞—Ç–æ—Ä

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ—Å—Ç–æ–π –∞—Ä—Ö–∏–≤–∞—Ç–æ—Ä –±–µ–∑ —Å–∂–∞—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (`open`, `read`, `write`, `lseek`). –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑ —Å–∂–∞—Ç–∏—è** - –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –≤–∏–¥–µ
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, –≤–ª–∞–¥–µ–ª–µ—Ü, –≥—Ä—É–ø–ø–∞, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
- **–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏** - —Ñ–∞–π–ª —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –∞—Ä—Ö–∏–≤–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ C –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lab5/
‚îú‚îÄ‚îÄ archiver.c           # –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∞—Ä—Ö–∏–≤–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ messages.h          # –§–∞–π–ª —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –∫–æ–Ω—Ç—Å–∞–Ω—Ç–∞–º–∏
‚îú‚îÄ‚îÄ Makefile            # –§–∞–π–ª –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ README.md           # –û–ø–∏—Å–∞–Ω–∏–µ
```

## üîß –°–±–æ—Ä–∫–∞

```bash
# –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É
make

# –°–æ–±—Ä–∞—Ç—å –∏ –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
make clean && make
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª –≤ –∞—Ä—Ö–∏–≤
./archiver archive.arch -i file.txt
./archiver archive.arch --input file.txt

# –ò–∑–≤–ª–µ—á—å —Ñ–∞–π–ª –∏–∑ –∞—Ä—Ö–∏–≤–∞ (–∏ —É–¥–∞–ª–∏—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞)
./archiver archive.arch -e file.txt
./archiver archive.arch --extract file.txt

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞
./archiver archive.arch -s
./archiver archive.arch --stat

# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É
./archiver -h
./archiver --help
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏:**
```bash
./archiver myarchive.arch -i doc1.txt
./archiver myarchive.arch -i doc2.txt
```

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∞—Ä—Ö–∏–≤–∞:**
```bash
./archiver myarchive.arch -s
```
–í—ã–≤–æ–¥:
```
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∞—Ä—Ö–∏–≤–∞ 'myarchive.arch':
----------------------------------------
doc1.txt                           21 –±–∞–π—Ç
doc2.txt                           21 –±–∞–π—Ç
----------------------------------------
–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: 2
```


## üìä –§–æ—Ä–º–∞—Ç –∞—Ä—Ö–∏–≤–∞

–ê—Ä—Ö–∏–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
[–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞ 1][–î–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ 1][–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞ 2][–î–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ 2]...
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞:**
```c
struct archive_entry {
    char name[256];      // –ò–º—è —Ñ–∞–π–ª–∞
    off_t size;          // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
    mode_t mode;         // –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
    uid_t uid;          // ID –≤–ª–∞–¥–µ–ª—å—Ü–∞
    gid_t gid;          // ID –≥—Ä—É–ø–ø—ã
    time_t atime;       // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
    time_t mtime;       // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
};
```

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ê—Ä—Ö–∏–≤–∞—Ç–æ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏:
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞—Ä—Ö–∏–≤—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ –∞—Ä—Ö–∏–≤–µ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã
- `open()` - –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤
- `read()` - —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- `write()` - –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö
- `lseek()` - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ —Ñ–∞–π–ª—É
- `stat()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
- `chmod()`, `chown()`, `utime()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** - —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü –∞—Ä—Ö–∏–≤–∞
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** - —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤ –±–µ–∑ –∏–∑–≤–ª–µ–∫–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä –∞—Ä—Ö–∏–≤–∞** - —á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤, –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
4. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤** - –≤—Å–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ

